<script type="text/x-red" data-template-name="wws-credentials">
    <div class="form-row">
        <label for="node-config-input-accountName" title="The name of the Watson Workspace App used to create the App."><i class="fa fa-user"></i> App Name</label>
        <input type="text" id="node-config-input-accountName">
    </div>
    <div class="form-row">
        <label for="node-config-input-clientId" title="The application identifier issued to the client during the Application registration process."><i class="fa fa-user-circle"></i> App ID</label>
        <input type="text" id="node-config-input-clientId">
    </div>
    <div class="form-row">
        <label for="node-config-input-clientSecret" title="The application secret issued to the client during the Application registration process."><i class="fa fa-user-secret"></i> App Secret</label>
        <input type="password" id="node-config-input-clientSecret" autocomplete="off">
    </div>
    <div class="form-row">
        <label for="node-config-input-api" title="The base URL for the Watson Workspace API"><i class="fa fa-external-link"></i> API URL</label>
        <input type="text" id="node-config-input-api" placeholder="https://api.watsonwork.ibm.com" >
    </div>
    <div class="form-row">
        <label for="node-config-input-accessTokenPath" title="The endpoint for authentication server. This is used to exchange the authorization code for an access token."><i class="fa fa-cog"></i> Token Path</label>
        <input type="text" id="node-config-input-accessTokenPath" placeholder="/oauth/token" >
    </div>
    <!-- No revoke at the moment
    <div class="form-row">
        <label for="node-config-input-revokeTokenPath" title="The endpoint for authentication server. This is used to revoke an existing access token in case of a User or App logout."><i class="fa fa-cog"></i> Revoke Path</label>
        <input type="text" id="node-config-input-revokeTokenPath" placeholder="/oauth/revoke" >
    </div>
    -->
    <div class="form-row">
        <label for="node-config-input-authorizePath" title="The endpoint for authorization server. This is used to get the authorization code."><i class="fa fa-cog"></i> Auth Path</label>
        <input type="text" id="node-config-input-authorizePath" placeholder="/oauth/authorize" >
    </div>
    <div class="form-tips">
		<h4>Tip</h4>
		<p>Hover over each label to receive additional hints for each field.</p>
	</div>
</script>

<script type="text/x-red" data-help-name="wws-credentials">
    <p>Stores the app specific account information provided by Watson Work.</p>
    <h3>Details</h3>
    <p>For each <a href=\"https://developer.watsonwork.ibm.com/apps\" target=\"_blank\">Watson Work App</a> which should be supported an own account has to be created.<br/>
        Provide the following information:
    </p>
    <dl class="message-properties">
        <dt>Account Name</dt>
            <dd>This should match with the name you provided for your Watson Work App.</dd>
        <dt>App ID</dt>
            <dd>The application ID provided during the App Registration Process.</dd>
        <dt>App Secret</dt>
            <dd>The application secret provided during the App Registration Process.</dd>
        <dt class="optional">API URL</dt>
            <dd>Default value <code>https://api.watsonwork.ibm.com</code>, override it if required.</dd>
        <dt class="optional">Token Path</dt>
            <dd>Default value <code>/outh/token</code>, override it if required. Check reference section for details.</dd>
        <dt class="optional">Revoke Path</dt>
            <dd>Default value <code>/outh/revoke</code>, override it if required. Check reference section for details.</dd>
        <dt class="optional">Auth Path</dt>
            <dd>Default value <code>/outh/authorize</code>, override it if required. Check reference section for details.</dd>
    </dl>
    <h3>References</h3>
    <ul>
        <li><a href="https://developer.watsonwork.ibm.com/docs/api-reference/authenticate-as-an-app" target="_blank">Authenticate as App</a> - Reference Documentation for the <code>Authentication as App</code> process flow</li>
        <li><a href="https://developer.watsonwork.ibm.com/docs/api-reference/authorize-on-behalf-of-a-user" target="_blank">Authorize on behalf of an user</a> - Reference Documentation for the <code>Authorize on behalf of an user</code> process flow</li>
        <li><a href="https://developer.watsonwork.ibm.com/docs/api-reference/get-user-access-token" target="_blank">Get User Access Token</a> - Reference Documentation for the <code>Get User Access Token</code> process flow</li>
        <li><a href="https://developer.watsonwork.ibm.com/docs/api-reference/refresh-user-access-token" target="_blank">Refresh User Access Token</a> - Reference Documentation for the <code>Refresh User Access Token</code> process flow</li>

    </ul>
</script>

<script type="text/javascript">
(function() {
    var configNodeId = null;
    var configNodeIntervalId = null;

    RED.nodes.registerType('wws-credentials',{
        category: 'config',
        defaults: {
            accountName: {value:"", required:true},
            api: {value:"https://api.watsonwork.ibm.com", required:true},
            accessTokenUrl:{value:"/oauth/token",required:true},
            authorize:{value:"/oauth/authorize", required:true}
        },
        credentials: {
            clientId: {type: "text"},
            clientSecret: {type: "password"}
        },
        label: function() {
            return this.accountName;
        },
        exportable: false
    });
})();
</script>
